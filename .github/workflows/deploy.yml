name: Quality & Deploy

on:
  pull_request:
    branches: master    

jobs:
  runVisualRegression:
    uses: ./customActions/runVisualRegression.yml

  runUITests:
    uses: ./customActions/runUITests.yml

  automerge:
    runs-on: ubuntu-latest
    needs: [runVisualRegression, runUITests]
    steps:
      - id: automerge
        name: automerge
        uses: "pascalgn/automerge-action@v0.15.3"
        env:
          GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
          MERGE_RETRIES: 10
          MERGE_RETRY_SLEEP: 10000
